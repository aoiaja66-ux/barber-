<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tulanov Barber Booking</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --gold: #D4AF37;
            --black: #121212;
            --dark-grey: #1E1E1E;
            --text-white: #FFFFFF;
            --tg-theme-button-color: #D4AF37;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--black);
            color: var(--text-white);
            margin: 0;
            padding: 0;
            padding-bottom: 80px;
        }

        .header {
            background: linear-gradient(180deg, #1a1a1a 0%, #121212 100%);
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid var(--gold);
        }

        .lang-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 10px;
            background: #1a1a1a;
        }

        .lang-btn {
            background: var(--dark-grey);
            color: var(--gold);
            border: 1px solid var(--gold);
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .lang-btn.active {
            background: var(--gold);
            color: var(--black);
        }

        .section-title {
            padding: 20px 15px 10px;
            color: var(--gold);
            font-size: 18px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .masters-container {
            display: flex;
            padding: 0 15px;
            gap: 15px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .master-card {
            min-width: 140px;
            background: var(--dark-grey);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 1px solid transparent;
        }

        .master-card.selected {
            border-color: var(--gold);
            background: rgba(212, 175, 55, 0.1);
        }

        .master-photo {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: #333;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            border: 2px solid var(--gold);
        }

        .service-item {
            background: var(--dark-grey);
            margin: 0 15px 10px;
            padding: 15px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--gold);
        }

        .service-info h3 { margin: 0; font-size: 16px; }
        .service-info p { margin: 5px 0 0; color: var(--gold); font-weight: bold; }

        .select-btn {
            background: var(--gold);
            color: var(--black);
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 0 15px;
        }

        .time-slot {
            background: var(--dark-grey);
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            border: 1px solid #333;
        }

        .time-slot.selected {
            background: var(--gold);
            color: var(--black);
            font-weight: bold;
        }

        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 15px;
            background: var(--black);
            border-top: 1px solid #333;
        }

        .main-btn {
            width: 100%;
            background: var(--gold);
            color: var(--black);
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: bold;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="lang-switch">
        <button class="lang-btn active" onclick="setLang('en')">EN</button>
        <button class="lang-btn" onclick="setLang('ru')">RU</button>
        <button class="lang-btn" onclick="setLang('uz')">UZ</button>
    </div>

    <div class="header">
        <h1 id="title">Tulanov Barber</h1>
    </div>

    <div class="section-title" id="choose-master">Master</div>
    <div class="masters-container">
        <div class="master-card selected" onclick="selectMaster(this, 'Abdulboriy Tulanov', 'Top Barber')">
            <div class="master-photo">üë®üèª‚Äçüíº</div>
            <div class="master-name">Abdulboriy Tulanov</div>
            <div class="master-rank" id="master-rank">Top Barber</div>
        </div>
    </div>

    <div class="section-title" id="services-title">Services</div>
    <div id="services-list"></div>

    <div class="section-title" id="time-title">Select Time</div>
    <div class="time-grid" id="time-grid"></div>

    <div class="footer">
        <button class="main-btn" id="book-btn" onclick="confirmBooking()">Book Appointment</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let currentLang = 'en';
        let selection = { master: 'Abdulboriy Tulanov', service: null, price: null, time: null, lang: 'en' };

        const translations = {
            en: {
                chooseMaster: "Master",
                services: "Services",
                selectTime: "Select Time",
                book: "Book Appointment",
                masterRank: "Top Barber",
                alert: "Please select service and time!",
                items: [
                    { name: "Premium Haircut", price: 80000 },
                    { name: "Kids (under 10)", price: 60000 },
                    { name: "Hair + Beard", price: 150000 },
                    { name: "Camouflage", price: 50000 },
                    { name: "Beard Modeling", price: 50000 },
                    { name: "Hairline Trim", price: 30000 },
                    { name: "Hair Wash", price: 25000 },
                    { name: "Facial Cleaning", price: 60000 },
                    { name: "Black Mask", price: 50000 },
                    { name: "Waxing (1 zone)", price: 15000 },
                    { name: "Clipper Cut", price: 40000 }
                ]
            },
            ru: {
                chooseMaster: "–ú–∞—Å—Ç–µ—Ä",
                services: "–£—Å–ª—É–≥–∏",
                selectTime: "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è",
                book: "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è",
                masterRank: "–¢–æ–ø –ë–∞—Ä–±–µ—Ä",
                alert: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É –∏ –≤—Ä–µ–º—è!",
                items: [
                    { name: "–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞", price: 80000 },
                    { name: "–î–µ—Ç—Å–∫–∞—è (–¥–æ 10 –ª–µ—Ç)", price: 60000 },
                    { name: "–°—Ç—Ä–∏–∂–∫–∞ + –ë–æ—Ä–æ–¥–∞", price: 150000 },
                    { name: "–ö–∞–º—É—Ñ–ª—è–∂", price: 50000 },
                    { name: "–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã", price: 50000 },
                    { name: "–û–∫–∞–Ω—Ç–æ–≤–∫–∞", price: 30000 },
                    { name: "–ú—ã—Ç—å–µ –≥–æ–ª–æ–≤—ã", price: 25000 },
                    { name: "–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞", price: 60000 },
                    { name: "–ß–µ—Ä–Ω–∞—è –º–∞—Å–∫–∞", price: 50000 },
                    { name: "–í–æ—Å–∫ (1 –∑–æ–Ω–∞)", price: 15000 },
                    { name: "–°—Ç—Ä–∏–∂–∫–∞ –ø–æ–¥ –º–∞—à–∏–Ω–∫—É", price: 40000 }
                ]
            },
            uz: {
                chooseMaster: "Master",
                services: "Xizmatlar",
                selectTime: "Vaqtni tanlang",
                book: "Zapis qilish",
                masterRank: "Top Barber",
                alert: "Iltimos, xizmat va vaqtni tanlang!",
                items: [
                    { name: "Sarchiroyli soch turmagi", price: 80000 },
                    { name: "Bolalar (10 yoshgacha)", price: 60000 },
                    { name: "Soch + Soqol", price: 150000 },
                    { name: "Kamuflaj", price: 50000 },
                    { name: "Soqol modelingi", price: 50000 },
                    { name: "Okantovka", price: 30000 },
                    { name: "Bosh yuvish", price: 25000 },
                    { name: "Yuz tozalash", price: 60000 },
                    { name: "Qora maska", price: 50000 },
                    { name: "Vosk (1 zona)", price: 15000 },
                    { name: "Mashinkada olish", price: 40000 }
                ]
            }
        };

        function setLang(lang) {
            currentLang = lang;
            selection.lang = lang;
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.innerText.toLowerCase() === lang));
            
            const t = translations[lang];
            document.getElementById('choose-master').innerText = t.chooseMaster;
            document.getElementById('services-title').innerText = t.services;
            document.getElementById('time-title').innerText = t.selectTime;
            document.getElementById('book-btn').innerText = t.book;
            document.getElementById('master-rank').innerText = t.masterRank;
            
            renderServices(t.items);
            renderTimeGrid();
        }

        function renderServices(items) {
            const list = document.getElementById('services-list');
            list.innerHTML = items.map(item => `
                <div class="service-item">
                    <div class="service-info"><h3>${item.name}</h3><p>${item.price.toLocaleString()} UZS</p></div>
                    <button class="select-btn" onclick="selectService(this, '${item.name}', ${item.price})">+</button>
                </div>
            `).join('');
        }

        function renderTimeGrid() {
            const grid = document.getElementById('time-grid');
            let times = [];
            for(let h = 10; h <= 21; h++) {
                times.push(`${h}:00`);
                if(h < 21) times.push(`${h}:30`);
            }
            grid.innerHTML = times.map(t => `
                <div class="time-slot" onclick="selectTime(this, '${t}')">${t}</div>
            `).join('');
        }

        function selectMaster(el, name, rank) {
            document.querySelectorAll('.master-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selection.master = name;
        }

        function selectService(el, name, price) {
            document.querySelectorAll('.select-btn').forEach(b => b.classList.remove('selected'));
            el.classList.add('selected');
            selection.service = name;
            selection.price = price;
        }

        function selectTime(el, time) {
            document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
            el.classList.add('selected');
            selection.time = time;
        }

        function confirmBooking() {
            if(!selection.service || !selection.time) {
                alert(translations[currentLang].alert);
                return;
            }
            tg.sendData(JSON.stringify(selection));
            tg.close();
        }

        setLang('en');
    </script>
</body>
</html>
